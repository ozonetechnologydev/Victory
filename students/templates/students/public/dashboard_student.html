{% extends 'base/public/base.html' %}
{% load static %}

{% block public_style %}
<!-- Plugins and style required by this views -->
<!--=========================================================================================-->
<!--dropzone  -->
<link href="{% static 'assets/libs/dropzone/dist/dropzone.css' %}" rel="stylesheet" /> 
<!--summernote  -->
<link href="{% static 'assets/plugins/summernote/dist/summernote-bs4.css' %}" rel="stylesheet" />

<!--Select Plugins-->
<link href="{% static 'assets/plugins/select2/css/select2.min.css' %}" rel="stylesheet"/>
<!--inputtags-->
<link href="{% static 'assets/plugins/inputtags/css/bootstrap-tagsinput.css' %}" rel="stylesheet" />
<!--multi select-->
<link href="{% static 'assets/plugins/jquery-multi-select/multi-select.css' %}" rel="stylesheet" type="text/css">
<!--Bootstrap Datepicker-->
<link href="{% static 'assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css' %}" rel="stylesheet" type="text/css">
<!--Touchspin-->
<link href="{% static 'assets/plugins/bootstrap-touchspin/css/jquery.bootstrap-touchspin.css' %}" rel="stylesheet" type="text/css">
<!--=========================================================================================-->
<!--Data Tables -->
<link href="{% static 'assets/plugins/bootstrap-datatable/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/plugins/bootstrap-datatable/css/buttons.bootstrap4.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/css/table.css' %}" rel="stylesheet"> 
<link href="{% static 'assets/css/form-control.css' %}" rel="stylesheet"> 
<!--=========================================================================================-->

{% endblock public_style %}

{% block public_content %}




<div class="pt-5 pb-5">
	<div class="container">
		<!-- User info -->
		<div class="row align-items-center">
			<div class="col-xl-12 col-lg-12 col-md-12 col-12">
				<!-- Bg -->
				<div class="pt-16 rounded-top-md bg-success" style="
								background: url({{request.user.get_cover_image.url}}) no-repeat;
								background-size: cover;
							"></div>
				<div
					class="d-flex align-items-end justify-content-between bg-white px-4 pt-2 pb-4 rounded-none rounded-bottom-md shadow-sm">
					<div class="d-flex align-items-center">
						<div class="me-2 position-relative d-flex justify-content-end align-items-end mt-n5">
							<img src="{{request.user.get_profile_image.url}}"
								class="avatar-xl rounded-circle border border-4 border-white position-relative"
								alt="" />
							<a href="#" class="position-absolute top-0 end-0" data-bs-toggle="tooltip"
								data-placement="top" title="Verified">
								<img src="{% static 'assets/images/svg/checked-mark.svg' %}" alt="" height="30"
									width="30" />
							</a>
						</div>
						<div class="lh-1">
							<h2 class="mb-0">{{request.user|title}}</h2>
								<span class="badge bg-light-primary text-primary ms-2">{% if request.user.email %}{{request.user.email}}{% else %}{{request.user.username}}{% endif %}</span>
								<span class="badge bg-light-primary text-success ms-2">Teacher</span>
								<hr>
								<p>{{request.user.bio}}</p>

						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Content -->

		<div class="row mt-0 mt-md-4">
			<div class="col-lg-3 col-md-4 col-12">
				<!-- User profile -->
				<nav class="navbar navbar-expand-md navbar-light shadow-sm mb-4 mb-lg-0 sidenav">
					<!-- Menu -->
					<a class="d-xl-none d-lg-none d-md-none text-inherit fw-bold" href="#">Menu</a>
					<!-- Button -->
					<button 
						class="navbar-toggler collapsed bg-primary" 
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#sidenav"
						aria-controls="sidenav"
						aria-expanded="false"
						aria-label="Toggle navigation"
					>
						<span class="icon-bar top-bar mt-0"></span>
						<span class="icon-bar middle-bar"></span>
						<span class="icon-bar bottom-bar"></span>
					</button>
					<!-- Collapse -->
					<div class="collapse navbar-collapse" id="sidenav">
						<div class="navbar-nav flex-column">
							<span class="navbar-header">Dashboard</span>
							<ul class="nav flex-column nav-pills list-unstyled ms-n2 mb-4">
								<li class="nav-item ">
									<a class="nav-link active" id="home_id-tab" data-bs-toggle="pill"
										href="#home_id" role="tab" aria-controls="home_id"
										aria-selected="true">
										<i class="fa fa-home nav-icon"></i> Home
									</a>
								</li>
								<li class="nav-item ">
									<a class="nav-link " id="dashboard_id-tab" data-bs-toggle="pill"
										href="#dashboard_id" role="tab" aria-controls="dashboard_id"
										aria-selected="true">
										<i class="zmdi zmdi-view-dashboard nav-icon"></i>  My Dashboard
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="academy_id-tab" data-bs-toggle="pill" href="#academy_id"
										role="tab" aria-controls="academy_id" aria-selected="false">
										<i class="fa fa-book nav-icon"></i>  Academy
									</a>
								</li>
							
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="my_quiz_id-tab" data-bs-toggle="pill" href="#my_quiz_id"
										role="tab" aria-controls="my_quiz_id" aria-selected="false">
										<i class="fa fa-question nav-icon"></i> Quiz
									</a>
								</li>

								<!-- Navbar header -->
								<span class="navbar-header mt-4">Account Settings</span>
																	<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="edit_may_profile_id-tab" data-bs-toggle="pill" href="#edit_may_profile_id" role="tab" aria-controls="edit_may_profile_id" aria-selected="false">
										<i class="zmdi zmdi-settings nav-icon"></i> Edit Profile
									</a>
								</li>
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="edit_may_address_id-tab" data-bs-toggle="pill" href="#edit_may_address_id" role="tab" aria-controls="edit_may_address_id" aria-selected="false">
										<i class="fa fa-address-book nav-icon"></i> Address
									</a>
								</li>
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="edit_may_account_id-tab" data-bs-toggle="pill" href="#edit_may_account_id" role="tab" aria-controls="edit_may_account_id" aria-selected="false">
										<i class="fa fa-user nav-icon"></i> Account
									</a>
								</li>
						
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="change_password_id-tab" data-bs-toggle="pill" href="#change_password_id" role="tab" aria-controls="change_password_id" aria-selected="false">
										<i  class="fa fa-lock nav-icon"></i> Change Password
									</a>
								</li>
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" href="{% url 'logout' %}">
										<i class="fa fa-sign-out nav-icon"></i> Sign Out
									</a>
								</li>
								{% if not request.user.is_superuser %}
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" id="delete_account_id-tab" data-bs-toggle="pill" href="#delete_account_id" role="tab" aria-controls="delete_account_id" aria-selected="false">
										<i class="fa fa-trash nav-icon"></i> Delete Profile
									</a>
								</li>
								{% endif %}
								{% comment %}
								<!-- Nav item -->
								<li class="nav-item">
									<a class="nav-link" href="."><i class="fa fa-refresh-cw nav-icon"></i> Social
										Profiles</a>
								</li> {% endcomment %}
								<!-- Nav item -->
								<!-- Nav item -->
								{% comment %} <li class="nav-item">
									<a class="nav-link" href="."><i class="fa fa-lock nav-icon"></i> Profile Privacy</a>
								</li> {% endcomment %}
								<!-- Nav item -->
							</ul>
						</div>
					</div>
				</nav>
			</div>
			<div class="col-lg-9 col-md-8 col-12">
				<div class="tab-content" id="tabContent">
					<div class="row">
						<div class="col-12">
							<div class="tab-content" id="v-pills-tabContent">
								<div class="tab-pane fade active show"id="home_id" role="tabpanel"aria-labelledby="home_id-tab">
									{% include 'components/profile_home.html' %}
								</div>
								<div class="tab-pane fade" id="dashboard_id" role="tabpanel"
									aria-labelledby="dashboard_id-tab">

									{% include "components/comingsoon.html" %}
  
								</div>
								<div class="tab-pane fade" id="academy_id" role="tabpanel"
									aria-labelledby="academy_id-tab">
									<div class="card mb-4">
										<!-- Card body -->
										<div class="card-body">
											{% include 'components/teacher_courses_table.html' %}
										</div>
									</div>

								</div>
								<div class="tab-pane fade" id="my_review_id" role="tabpanel"
									aria-labelledby="my_review_id-tab">
									<div class="card mb-4">
										<!-- Card body -->
										<div class="card-body">
											{% include 'components/reviews.html' with reviews=request.user.teacher.teacherreview_set.all %}
										</div>
									</div>
								</div>

								<div class="tab-pane fade" id="my_quiz_id" role="tabpanel"
									aria-labelledby="my_quiz_id-tab">
									{% include "components/comingsoon.html" %}
								</div>

								
								{% comment %} //////////////////////////////////// {% endcomment %}

								<div class="tab-pane fade"id="edit_may_profile_id" role="tabpanel"aria-labelledby="edit_may_profile_id-tab">
									{% include "components/update_profile.html" %}
								</div>
								<div class="tab-pane fade" id="edit_may_address_id" role="tabpanel" aria-labelledby="edit_may_address_id-tab">
									<div class="card mb-4">
										<div class="card-header">
											<h4 class="card-title border-bottom mb-0 p-4 bg-success text-light">Edit Address</h4>
										</div>
										<!-- Card body -->
										<div class="card-body">
											{% include 'components/forms.html' with form=address_form action='address/update/' %}
										</div>
									</div>
								</div>
								<div class="tab-pane fade" id="edit_may_account_id" role="tabpanel" aria-labelledby="edit_may_account_id-tab">
									<div class="card mb-4">
										<div class="card-header">
											<h4 class="card-title border-bottom mb-0 p-4 bg-success text-light">Edit Account</h4>
										</div>
										<!-- Card body -->
										<div class="card-body">
											{% include 'components/forms.html' with form=account_form  action='/accounts/update/' %}
										</div>
									</div>
								</div>
								<div class="tab-pane fade" id="change_password_id" role="tabpanel"aria-labelledby="change_password_id-tab">
									<div class="card mb-4">
										<div class="card-header">
											<h4 class="card-title border-bottom mb-0 p-4 bg-success text-light">Chenge Password</h4>
										</div>
										<!-- Card body -->
										<div class="card-body">
											{% if request.user.is_superuser %}
											{% include 'components/forms.html' with form=password_form action='/accounts/admin/password/change/' %}
											{% else %}
											{% include 'components/forms.html' with form=password_form action='/accounts/password/change/' %}
											{% endif %}
										</div>
									</div>
								</div>
								{% if not request.user.is_superuser %}
									<div class="tab-pane fade" id="delete_account_id" role="tabpanel"aria-labelledby="delete_account_id-tab">
										<div class="card mb-4">
											<!-- Card body -->
											<div class="card-header">
												<h4 class="card-title border-bottom mb-0 p-4 bg-success text-light">Delete your account</h4>
												<p class="my-4">Delete or Close your account permanently.</p>
											</div>
											<!-- Card body -->
											<div class="card-body p-4">
												<span class="text-danger h4">Warning</span>
												<p>
													If you close your account, you will be unsubscribed from all
													your 0 courses, and will lose access forever.
												</p>
												<a href="{% url 'close_user_account' %}" class="btn btn-outline-danger btn-sm">Close My Account</a>
											</div>

										</div>
									</div>
								{% endif %}

							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
	{% endblock public_content %}


	{% block public_script %}
   
   
	<!-- Plugins and scripts required by This views -->
	<!--=========================================================================================-->
	<!--summernote Js-->
	<script src="{% static 'assets/plugins/summernote/dist/summernote-bs4.min.js' %}"></script>
	<!--dropzone Js-->
	<script src="{% static 'assets/libs/dropzone/dist/min/dropzone.min.js' %}"></script>
	<script src="{% static 'assets/js/dropzone-script.js' %}"></script>
	<!--=========================================================================================-->
	<!--Bootstrap Touchspin Js-->
	<script src="{% static 'assets/plugins/bootstrap-touchspin/js/jquery.bootstrap-touchspin.js' %}"></script>
	<script src="{% static 'assets/plugins/bootstrap-touchspin/js/bootstrap-touchspin-script.js' %}"></script>
	
	<!--Select Plugins Js-->
	<script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>
	<!--Inputtags Js-->
	<script src="{% static 'assets/plugins/inputtags/js/bootstrap-tagsinput.js' %}"></script>
	<!--Multi Select Js-->
	<script src="{% static 'assets/plugins/jquery-multi-select/jquery.multi-select.js' %}"></script>
	<script src="{% static 'assets/plugins/jquery-multi-select/jquery.quicksearch.js' %}"></script>
	<script src="{% static 'assets/js/form-script.js' %}"></script>
	
	 <!--Data Tables js-->
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/jquery.dataTables.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/dataTables.bootstrap4.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/dataTables.buttons.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/buttons.bootstrap4.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/jszip.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/pdfmake.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/vfs_fonts.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/buttons.html5.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/buttons.print.min.js' %}"></script>
	 <script src="{% static 'assets/plugins/bootstrap-datatable/js/buttons.colVis.min.js' %}"></script>
	
	<!--Inline script-->
	<script>
	  $(function(){
		$('.default-datatable').DataTable();

		$('.single-select')?.select2();
   
   
		if ($('.summernoteEditor')?.length){
		  $('.summernoteEditor')?.summernote({
			height: 400,
			tabsize: 2
		  });
		}
		
		$("input[type='password']")?.addClass("form-control");

		$(".hx-delete-alert-confirm").click(function(e){
             
            var alert_text = $(e.currentTarget.id).attr("alert-text");

            swal({
                title: "Are you sure?",
                text: alert_text || "Once deleted, you will not be able to recover data!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
            .then((willDelete) => {
                if (willDelete) {

                    swal("Information!", "Poof! Your data has been deleted!,", "info", {
                        icon: "success",
                    });
                    console.log(">>>>>>>>>>>>>>>>>>>>>>" + e.currentTarget.id)
                    htmx.trigger("#" + e.currentTarget.id, "confirmed")

                } else {
                    swal("Information!", "Your data file is safe!,", "info");
                }
            });
        });
	   });
   </script>
   {% endblock public_script %}